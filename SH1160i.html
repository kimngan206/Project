<!-- SH1160i.html -->

<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Honda SH160i - Chi Tiết Sản Phẩm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/png" href="image/icon.png">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to bottom, #f9fafb, #e9ecef);
            color: #393939;
        }

        .text-honda-red {
            color: #de0000;
        }

        .bg-honda-red {
            background-color: #de0000;
        }

        /* === HEADER STYLES === */
        .main-header {
            background-color: #fff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            width: 100%;
        }

        .header-container {
            max-width: 1280px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
            font-size: 1.5rem;
            color: #393939;
            text-decoration: none;
        }

        .logo img {
            height: 53px;
        }

        .main-nav {
            display: flex;
        }

        .main-nav ul {
            display: flex;
            gap: 30px;
            list-style: none;
            margin: 0;
            padding: 0;
            align-items: center;
        }

        .main-nav a {
            text-decoration: none;
            color: #393939;
            font-weight: 500;
            position: relative;
            padding: 8px 4px;
            transition: color 0.3s ease;
            font-size: 16px;
        }

        .main-nav a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: #de0000;
            transition: width 0.3s ease;
        }

        .main-nav a:hover {
            color: #de0000;
        }

        .main-nav a:hover::after {
            width: 100%;
        }

        .header-icons {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-icon,
        .cart-icon {
            color: #393939;
            font-size: 20px;
            cursor: pointer;
            transition: color 0.3s ease;
            position: relative;
        }

        .search-icon:hover,
        .cart-icon:hover {
            color: #de0000;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #de0000;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.7rem;
            min-width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Mobile Menu Styles */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #393939;
        }

        .mobile-nav-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .mobile-nav {
            position: fixed;
            top: 0;
            left: -300px;
            width: 250px;
            height: 100%;
            background-color: #fff;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.2);
            transition: left 0.3s ease;
            z-index: 1000;
            display: none;
        }

        .mobile-nav.open {
            left: 0;
        }

        .mobile-nav-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #eee;
        }

        .mobile-nav-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #393939;
        }

        .mobile-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .mobile-nav li a {
            display: block;
            padding: 1rem;
            text-decoration: none;
            color: #393939;
            border-bottom: 1px solid #eee;
        }

        @media (max-width: 768px) {
            .main-nav {
                display: none;
            }

            .mobile-menu-toggle,
            .mobile-nav {
                display: block;
            }

            .header-container {
                justify-content: space-between;
            }

            .header-icons {
                gap: 15px;
            }
        }

        .avatar-circle {
            width: 55px;
            border-radius: 82%;
            object-fit: cover;
            border: 2px solid #ddd;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* === ORIGINAL PAGE STYLES === */
        .tab-button.active {
            border-bottom: 3px solid #dc2626;
            color: #dc2626;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 50;
        }

        .modal-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
        }

        .modal-content img {
            display: block;
            margin: auto;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        footer {
            background: linear-gradient(135deg, #333333, #34495e);
            color: white;
            padding: 60px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-col h3 {
            color: #de0000;
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .footer-col {
            margin-left: 50px;
        }

        .footer-col p,
        .footer-col ul li a {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.8;
            transition: color 0.3s;
        }

        .footer-col ul li a:hover {
            color: white;
        }

        .social-links a {
            color: white;
            margin-right: 15px;
            font-size: 1.5rem;
            transition: color 0.3s;
        }

        .social-links a:hover {
            color: #de0000;
        }

        .copyright {
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 20px;
        }

        .cart-modal-footer .button-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
        }

        .cart-modal-footer .button-group button,
        .cart-modal-footer .button-group a {
            flex: 1;
        }

        .main-container {
            display: flex;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: #fff;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
        }

        .modal-close:hover,
        .modal-close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        /* Cart Sidebar Styles */
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            z-index: 1040;
            transition: opacity 0.3s ease;
        }

        .cart-modal-content {
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            max-width: 90vw;
            height: 100%;
            background-color: #ffffff;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            transform: translateX(100%);
            transition: transform 0.3s ease-out;
            display: flex;
            flex-direction: column;
        }

        body.cart-sidebar-open .cart-modal {
            display: block;
        }

        body.cart-sidebar-open .cart-modal-content {
            transform: translateX(0);
        }

        .cart-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            flex-shrink: 0;
        }

        .cart-modal-header h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0;
        }

        .close-cart-modal {
            background: none;
            border: none;
            font-size: 1.75rem;
            cursor: pointer;
            color: #999;
            line-height: 1;
        }

        .close-cart-modal:hover {
            color: #333;
        }

        .cart-modal-body {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1.5rem;
        }

        .cart-modal-footer {
            padding: 1.5rem;
            border-top: 1px solid #e5e7eb;
            background-color: #f9fafb;
            flex-shrink: 0;
        }

        .cart-modal-footer h3 {
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .button-group {
            display: flex;
            gap: 10px;
        }

        .btn-continue-shopping {
            flex: 1;
            background-color: #6b7280;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn-continue-shopping:hover {
            background-color: #4b5563;
        }

        .cart-btn {
            flex: 1;
            background-color: #de0000;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.3s;
            text-decoration: none;
            display: block;
        }

        .cart-btn:hover {
            background-color: #b30000;
        }

        .cart-counter {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc2626;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        /* NEW STYLES FOR COLOR SWATCHES */
        .color-swatch {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: transform 0.2s, border-color 0.2s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .color-swatch:hover {
            transform: scale(1.1);
        }

        .active-swatch {
            border-color: #de0000;
            border-width: 3px;
            box-shadow: 0 0 8px rgba(222, 0, 0, 0.5);
        }
    </style>
</head>

<body>
    <header class="main-header">
        <div class="header-container">
            <a href="#" class="logo">
                <img src="image/logo.png" alt="Logo" class="avatar-circle">
                <span>AnhEm Motor</span>
            </a>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">Trang Chủ</a></li>
                    <li><a href="listings.html">Sản Phẩm</a></li>
                    <li><a href="about.html">Giới Thiệu</a></li>
                    <li><a href="news.html">Tin Tức-Sự Kiện</a></li>
                    <li><a href="promotion.html">Khuyến Mãi</a></li>
                    <li><a href="contact.html">Liên Hệ</a></li>
                    <li><a href="service.html">Dịch Vụ</a></li>
                </ul>
            </nav>
            <div class="header-icons">
                <i class="fa-solid fa-magnifying-glass search-icon"></i>
                <div class="cart-icon" id="cart-btn">
                    <i class="fa-solid fa-shopping-cart"></i>
                    <span id="cart-counter" class="cart-count hidden">0</span>
                </div>
                <button class="mobile-menu-toggle">
                    <i class="fa-solid fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <div class="mobile-nav-overlay"></div>
    <nav class="mobile-nav">
        <div class="mobile-nav-header">
            <span>Menu</span>
            <button class="mobile-nav-close">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <ul>
            <li><a href="index.html">Trang Chủ</a></li>
            <li><a href="listings.html">Sản Phẩm</a></li>
            <li><a href="about.html">Giới Thiệu</a></li>
            <li><a href="news.html">Tin Tức-Sự Kiện</a></li>
            <li><a href="promotion.html">Khuyến Mãi</a></li>
            <li><a href="contact.html">Liên Hệ</a></li>
            <li><a href="service.html">Dịch Vụ</a></li>
        </ul>
    </nav>

    <header class="bg-white shadow-md sticky top-0 z-10">
        <div class="max-w-6xl mx-auto flex items-center justify-between px-6 py-4">
            <a href="product.html" class="flex items-center text-gray-700 hover:text-red-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                        d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
                        clip-rule="evenodd" />
                </svg>
                Quay lại trang sản phẩm
            </a>
            <h1 class="text-lg font-bold text-gray-800">Honda SH160i</h1>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-10">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
            <!-- Product Image Section -->
            <div>
                <!-- Container để giữ kích thước cố định -->
                <div id="product-image-container"
                    class="w-full h-[450px] flex items-center justify-center mb-4 bg-gray-100 rounded-2xl">
                    <img id="product-image" src="moto/SH160i.png" alt="Honda SH160i"
                        class="max-w-full max-h-full object-contain rounded-2xl shadow-xl transition-opacity duration-300">
                </div>
                <!-- Color Selector -->
                <div id="color-selector-container" class="flex flex-col items-center mb-6">
                    <p class="text-gray-600 font-semibold mb-3">Chọn màu sắc: <span id="color-name"
                            class="font-bold text-gray-800"></span></p>
                    <div id="color-swatches" class="flex justify-center space-x-4">
                        <!-- Color swatches will be generated by JavaScript -->
                    </div>
                </div>
            </div>
            <!-- Product Details Section -->
            <div class="bg-white rounded-2xl shadow-lg p-8 self-start">
                <h2 class="text-3xl font-bold text-gray-900 mb-3">Honda SH160i</h2>
                <p class="text-gray-500 text-lg mb-5">Phong cách châu Âu, khẳng định đẳng cấp.</p>
                <div class="mb-6">
                    <span class="text-4xl font-extrabold text-red-600">73.921.091 VNĐ</span>
                </div>
                <p class="text-gray-700 leading-relaxed mb-6">
                    Honda SH160i là dòng xe tay ga cao cấp, nổi bật với thiết kế sang trọng và hiện đại. Xe được trang
                    bị động cơ 160cc eSP+ mạnh mẽ, tiết kiệm nhiên liệu, cùng nhiều công nghệ tiên tiến như hệ thống
                    phanh ABS, khóa thông minh Smart Key, mang đến trải nghiệm lái an toàn, tiện nghi và đẳng cấp.
                </p>
                <button id="add-to-cart-btn"
                    class="block w-full text-center bg-red-600 text-white font-bold py-3 rounded-xl shadow-md hover:bg-red-700 transition">
                    Thêm vào giỏ hàng
                </button>
            </div>
        </div>

        <div class="mt-12 bg-white rounded-2xl shadow-lg p-8">
            <div class="flex border-b mb-6">
                <button id="spec-tab" class="tab-button active px-6 py-3 font-semibold text-gray-600">Thông số kỹ
                    thuật</button>
                <button id="gallery-tab" class="tab-button px-6 py-3 font-semibold text-gray-600">Bộ sưu tập</button>
            </div>
            <div id="spec-content" class="tab-content active">
                <div class="overflow-x-auto">
                    <table class="min-w-full border-collapse">
                        <tbody>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Khối lượng bản thân</th>
                                <td class="py-3">133 kg</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Kích thước (Dài x Rộng x Cao)
                                </th>
                                <td class="py-3">2.090 x 739 x 1.129 mm</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Khoảng cách trục bánh xe</th>
                                <td class="py-3">1.353 mm</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Độ cao yên</th>
                                <td class="py-3">799 mm</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Khoảng sáng gầm xe</th>
                                <td class="py-3">146 mm</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Dung tích bình xăng</th>
                                <td class="py-3">7 lít</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Kích cỡ lốp trước/sau</th>
                                <td class="py-3">Trước: 100/80 - 16 M/C 50P <br> Sau: 120/80 - 16 M/C 60P</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Phuộc trước</th>
                                <td class="py-3">Ống lồng, giảm chấn thủy lực</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Phuộc sau</th>
                                <td class="py-3">Lò xo trụ, giảm chấn thủy lực</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Loại động cơ</th>
                                <td class="py-3">PGM-FI, xăng, 4 kỳ, 1 xy-lanh, làm mát bằng dung dịch</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Công suất tối đa</th>
                                <td class="py-3">12,4 kW / 8.500 vòng/phút</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Dung tích nhớt máy</th>
                                <td class="py-3">0,9 lít khi rã máy <br> 0,8 lít khi thay nhớt</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Loại truyền động</th>
                                <td class="py-3">Vô cấp, điều khiển tự động</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Hệ thống khởi động</th>
                                <td class="py-3">Điện</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Moment cực đại</th>
                                <td class="py-3">14,8 Nm / 6.500 vòng/phút</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Dung tích xy-lanh</th>
                                <td class="py-3">156,9 cm³</td>
                            </tr>
                            <tr class="border-b">
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Đường kính x Hành trình piston
                                </th>
                                <td class="py-3">60,0 mm x 55,5 mm</td>
                            </tr>
                            <tr>
                                <th class="text-left py-3 pr-6 font-medium text-gray-500">Tỷ số nén</th>
                                <td class="py-3">12,0 : 1</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div id="gallery-content" class="tab-content">
                <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
                    <img src="moto/SH160i/1.jpg"
                        class="gallery-img rounded-lg shadow-md hover:scale-105 transition-transform duration-300 cursor-pointer"
                        alt="Hình ảnh 1">
                    <img src="moto/SH160i/2.jpg"
                        class="gallery-img rounded-lg shadow-md hover:scale-105 transition-transform duration-300 cursor-pointer"
                        alt="Hình ảnh 2">
                    <img src="moto/SH160i/3.jpg"
                        class="gallery-img rounded-lg shadow-md hover:scale-105 transition-transform duration-300 cursor-pointer"
                        alt="Hình ảnh 3">
                    <img src="moto/SH160i/4.jpg"
                        class="gallery-img rounded-lg shadow-md hover:scale-105 transition-transform duration-300 cursor-pointer"
                        alt="Hình ảnh 4">
                    <img src="moto/SH160i/5.jpg"
                        class="gallery-img rounded-lg shadow-md hover:scale-105 transition-transform duration-300 cursor-pointer"
                        alt="Hình ảnh 5">
                    <img src="moto/SH160i/6.jpg"
                        class="gallery-img rounded-lg shadow-md hover:scale-105 transition-transform duration-300 cursor-pointer"
                        alt="Hình ảnh 6">
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <h3>Thông Tin Liên Hệ</h3>
                    <p><i class="fas fa-map-marker-alt"></i> 193 Đỗ Văn Thi, Phường Trảng Biên, TP. Biên Hòa, Tỉnh Đồng
                        Nai</p>
                    <p><i class="fas fa-phone"></i> 012 3456 7890</p>
                    <p><i class="fas fa-envelope"></i> anhemmotor@gmail.com</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h3>Sản Phẩm</h3>
                    <ul>
                        <li><a href="#">Xe máy Honda</a></li>
                        <li><a href="#">Xe máy Yamaha</a></li>
                        <li><a href="#">Xe máy Suzuki</a></li>
                        <li><a href="#">Xe máy Kawasaki</a></li>
                        <li><a href="#">Phụ kiện xe máy</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Dịch Vụ</h3>
                    <ul>
                        <li><a href="#">Bảo dưỡng định kỳ</a></li>
                        <li><a href="#">Sửa chữa xe máy</a></li>
                        <li><a href="#">Đăng ký xe</a></li>
                        <li><a href="#">Bảo hiểm xe máy</a></li>
                        <li><a href="#">Tư vấn mua xe</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Hỗ Trợ</h3>
                    <ul>
                        <li><a href="#">Chính sách bảo hành</a></li>
                        <li><a href="#">Hướng dẫn sử dụng</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Liên hệ hỗ trợ</a></li>
                        <li><a href="#">Sitemap</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>© 2025 AnhEm Motor. Mọi quyền được bảo lưu. | Thiết kế bởi AnhEm Team</p>
            </div>
        </div>
    </footer>

    <!-- Cart Modal -->
    <div id="cart-modal" class="cart-modal">
        <div class="cart-modal-content">
            <div class="cart-modal-header">
                <h2><i class="fas fa-shopping-cart"></i> Giỏ hàng</h2>
                <button class="close-cart-modal">&times;</button>
            </div>
            <div class="cart-modal-body">
                <div id="cart-items"></div>
            </div>
            <div class="cart-modal-footer">
                <h3>Tổng cộng: <span id="cart-total">0 VNĐ</span></h3>
                <div class="button-group">
                    <button class="btn-continue-shopping">Tiếp tục mua sắm</button>
                    <a href="shoppingcart.html">
                        <button class="cart-btn view-cart">Xem giỏ hàng</button>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div id="image-modal" class="modal" onclick="closeModal()">
        <span class="modal-close" onclick="closeModal(event)">&times;</span>
        <div class="modal-content"><img id="modal-image" src="" alt="Full size image"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // DOM Elements
            const specTab = document.getElementById('spec-tab');
            const galleryTab = document.getElementById('gallery-tab');
            const specContent = document.getElementById('spec-content');
            const galleryContent = document.getElementById('gallery-content');
            const modal = document.getElementById('image-modal');
            const modalImage = document.getElementById('modal-image');
            const galleryImages = document.querySelectorAll('.gallery-img');
            const cartBtn = document.getElementById('cart-btn');
            const cartOverlay = document.getElementById('cart-overlay');
            const closeCartBtn = document.querySelector('.close-cart-modal');
            const addToCartBtn = document.getElementById('add-to-cart-btn');
            const cartCounter = document.getElementById('cart-counter');
            const cartItems = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');
            const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
            const mobileNav = document.querySelector('.mobile-nav');
            const mobileNavOverlay = document.querySelector('.mobile-nav-overlay');
            const mobileNavClose = document.querySelector('.mobile-nav-close');

            // NEW: Color Selection Elements
            const productImage = document.getElementById('product-image');
            const colorNameSpan = document.getElementById('color-name');
            const colorSwatchesContainer = document.getElementById('color-swatches');

            // Product Data
            const product = {
                id: 'sh160i-Xám',
                name: 'Honda SH160i',
                price: 73921091,
            };

            const colors = [
                { name: 'Xám', code: '#a0a0a0', image: 'moto/SH160i.png' },
                { name: 'Đen', code: '#1a1a1a', image: 'moto/SH160i/den.png' },
                { name: 'Đỏ', code: '#c00000', image: 'moto/SH160i/do.png' },
                { name: 'Trắng', code: '#f0f0f0', image: 'https://static1.thinhphatmedia.vn/cafeautoData/upload/tintuc/thitruong/2015/11/tuan-02/sh125iabs2015011-1447334894.jpg' }
            ];
            let selectedColor = colors[0]; // Default to Black

            // Cart State
            let cart = loadCartFromMemory() || [];

            // --- FUNCTIONS ---

            // Mobile Menu
            function openMobileMenu() { mobileNav.classList.add('open'); mobileNavOverlay.style.display = 'block'; }
            function closeMobileMenu() { mobileNav.classList.remove('open'); mobileNavOverlay.style.display = 'none'; }

            // Tabs
            function showTab(tab, content) {
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                content.classList.add('active');
            }

            // Image Modal
            function openModal(imageSrc) { modal.style.display = 'flex'; modalImage.src = imageSrc; }
            function closeModal(event) { if (event) { event.stopPropagation(); } modal.style.display = 'none'; }

            // Cart Drawer
            function openCart() {
                const header = document.querySelector('.main-header');
                const cartModal = document.getElementById('cart-modal');
                const cartModalContent = cartModal.querySelector('.cart-modal-content');

                const headerHeight = header.offsetHeight;
                cartModalContent.style.top = `${headerHeight}px`;
                cartModalContent.style.height = `calc(100vh - ${headerHeight}px)`;

                document.body.classList.add('cart-sidebar-open');
            }

            function closeCart() {
                document.body.classList.remove('cart-sidebar-open');
            }

            // Cart Persistence
            function saveCartToMemory() {
                try {
                    const cartData = JSON.stringify(cart);
                    // Save to cookie with 7 days expiration
                    const expires = new Date();
                    expires.setTime(expires.getTime() + (7 * 24 * 60 * 60 * 1000));
                    document.cookie = `hondaCart=${encodeURIComponent(cartData)}; expires=${expires.toUTCString()}; path=/`;

                    // Backup methods
                    document.cartStorage = cartData;
                    window.name = cartData;
                } catch (error) {
                    console.log('Could not save cart data');
                }
            }

            function loadCartFromMemory() {
                try {
                    // Try cookie first
                    const cookies = document.cookie.split(';');
                    for (let cookie of cookies) {
                        const [name, value] = cookie.trim().split('=');
                        if (name === 'hondaCart') {
                            const cartData = decodeURIComponent(value);
                            if (cartData && cartData.startsWith('[')) {
                                return JSON.parse(cartData);
                            }
                        }
                    }

                    // Fallback
                    let cartData = document.cartStorage || window.name || null;
                    if (cartData && cartData.startsWith('[')) {
                        return JSON.parse(cartData);
                    }
                    return [];
                } catch (error) {
                    console.log('Could not load cart data');
                    return [];
                }
            }

            // NEW: Color Selection Logic
            function updateProductColor(color) {
                selectedColor = color;
                product.id = `sh160i-${color.name}`;  // Cập nhật id theo màu
                productImage.style.opacity = '0.5';
                setTimeout(() => {
                    productImage.src = selectedColor.image;
                    productImage.alt = `${product.name} - ${selectedColor.name}`;
                    colorNameSpan.textContent = selectedColor.name;
                    productImage.style.opacity = '1';
                }, 200);

                // Update active swatch
                document.querySelectorAll('.color-swatch').forEach(swatch => {
                    swatch.classList.toggle('active-swatch', swatch.dataset.colorName === selectedColor.name);
                });
            }

            function initializeColorSelector() {
                colorSwatchesContainer.innerHTML = colors.map(color => `
                    <button class="color-swatch" data-color-name="${color.name}" style="background-color: ${color.code};"></button>
                `).join('');

                colorSwatchesContainer.addEventListener('click', (e) => {
                    if (e.target.classList.contains('color-swatch')) {
                        const colorName = e.target.dataset.colorName;
                        const newColor = colors.find(c => c.name === colorName);
                        if (newColor) {
                            updateProductColor(newColor);
                        }
                    }
                });

                // Set initial color
                updateProductColor(selectedColor);
            }

            // Cart Management
            function getProductTotalQuantityInCart(productId) {
                return cart.filter(item => item.id === productId)
                    .reduce((sum, item) => sum + item.quantity, 0);
            }

            function addToCart() {
                if (getProductTotalQuantityInCart(product.id) >= 3) {
                    alert('Số lượng sản phẩm đã đạt mức tối đa (3). Vui lòng đến cửa hàng để mua trực tiếp nếu bạn muốn mua số lượng lớn hơn.');
                    return;
                }

                const existingItem = cart.find(item => item.id === product.id && item.color === selectedColor.name);

                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        ...product,
                        color: selectedColor.name,
                        image: selectedColor.image,
                        quantity: 1
                    });
                }

                saveCartToMemory();
                updateCartUI();
                openCart();
            }

            function removeFromCart(productId, color) {
                cart = cart.filter(item => !(item.id === productId && item.color === color));
                saveCartToMemory();
                updateCartUI();
            }

            window.removeFromCart = removeFromCart; // Expose to global scope for onclick

            function updateQuantity(productId, color, newQuantity) {
                const item = cart.find(item => item.id === productId && item.color === color);
                if (!item) return;

                if (newQuantity > item.quantity) { // Only check when increasing
                    if (getProductTotalQuantityInCart(productId) >= 3) {
                        alert('Số lượng sản phẩm đã đạt mức tối đa (3). Vui lòng đến cửa hàng để mua trực tiếp nếu bạn muốn mua số lượng lớn hơn.');
                        return;
                    }
                }

                if (newQuantity <= 0) {
                    removeFromCart(productId, color);
                } else {
                    item.quantity = newQuantity;
                    saveCartToMemory();
                    updateCartUI();
                }
            }

            window.updateQuantity = updateQuantity; // Expose to global scope for onclick

            function updateCartUI() {
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                cartCounter.textContent = totalItems;
                cartCounter.classList.toggle('hidden', totalItems === 0);

                if (cart.length === 0) {
                    cartItems.innerHTML = `
                        <div class="text-center py-8 text-gray-500">
                            <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5M17 13v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6"></path></svg>
                            <p>Giỏ hàng của bạn đang trống</p>
                        </div>`;
                } else {
                    cartItems.innerHTML = cart.map(item => `
                        <div class="flex items-center space-x-4 py-4 border-b">
                            <img src="${item.image}" alt="${item.name} - ${item.color}" class="w-16 h-16 object-cover rounded-lg bg-gray-100">
                            <div class="flex-1">
                                <h3 class="font-medium text-sm">${item.name}</h3>
                                <p class="text-xs text-gray-500">Màu: ${item.color}</p>
                                <p class="text-red-600 font-semibold text-sm">${item.price.toLocaleString()} VNĐ</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button onclick="updateQuantity('${item.id}', '${item.color}', ${item.quantity - 1})" class="w-7 h-7 flex items-center justify-center bg-gray-200 rounded-full hover:bg-gray-300 transition">-</button>
                                <span class="w-8 text-center font-medium">${item.quantity}</span>
                                <button onclick="updateQuantity('${item.id}', '${item.color}', ${item.quantity + 1})" class="w-7 h-7 flex items-center justify-center bg-gray-200 rounded-full hover:bg-gray-300 transition">+</button>
                            </div>
                            <button onclick="removeFromCart('${item.id}', '${item.color}')" class="text-gray-400 hover:text-red-600 transition">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                            </button>
                        </div>
                    `).join('');
                }

                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                cartTotal.textContent = total.toLocaleString() + ' VNĐ';
            }

            // --- INITIALIZATION & EVENT LISTENERS ---

            // Initial setup
            showTab(specTab, specContent);
            initializeColorSelector();
            updateCartUI();

            // Event Listeners
            specTab.addEventListener('click', () => showTab(specTab, specContent));
            galleryTab.addEventListener('click', () => showTab(galleryTab, galleryContent));
            cartBtn.addEventListener('click', openCart);
            closeCartBtn.addEventListener('click', closeCart);

            const continueShoppingBtn = document.querySelector('.btn-continue-shopping');
            if (continueShoppingBtn) {
                continueShoppingBtn.addEventListener('click', () => {
                    closeCart();
                    window.location.href = 'product.html';
                });
            }

            const cartModal = document.getElementById('cart-modal');
            cartModal.addEventListener('click', (e) => {
                if (e.target === cartModal) {
                    closeCart();
                }
            });

            addToCartBtn.addEventListener('click', addToCart);
            galleryImages.forEach(image => {
                image.addEventListener('click', () => openModal(image.src));
            });
            mobileMenuToggle.addEventListener('click', openMobileMenu);
            mobileNavClose.addEventListener('click', closeMobileMenu);
            mobileNavOverlay.addEventListener('click', closeMobileMenu);
        });
    </script>
</body>

</html>